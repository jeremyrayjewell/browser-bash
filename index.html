<!DOCTYPE html><!doctype html>

<html lang="en"><html lang="en">

<head>  <head>

    <meta charset="UTF-8">    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <link rel="icon" type="image/svg+xml" href="/aggregatron.svg" />

    <title>Aggregatron Records Terminal</title>    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>    <title>ⱯᘓᘓʁEᘓⱯꓕʁOИ</title>

        body {

            margin: 0;    <script type="module" crossorigin src="/assets/index-DbzZQOI5.js"></script>

            padding: 20px;    <link rel="stylesheet" crossorigin href="/assets/index-B5EazO63.css">

            background: #000;    <link rel="stylesheet" href="/assets/menu98.css">

            color: #00ff00;

            font-family: 'Courier New', monospace;    <style>

            line-height: 1.2;      #menu-overlay { z-index: 9999; pointer-events: auto; }

            overflow-x: auto;      .win98-window { pointer-events: auto; }

        }

        .container {      .popup98 {

            white-space: pre;        position: fixed;

            font-size: 14px;        top: 12vh;

        }        left: 50%;

        .redirect-info {        transform: translateX(-50%);

            color: #ffff00;        width: min(92vw, 520px);

            margin-bottom: 20px;        z-index: 10000; /* above menu */

        }      }

    </style>      .hidden { display: none !important; }

</head>

<body>      .win98-controls .ctl { cursor: pointer; }

    <div class="redirect-info">      .ctl.ctl-close:focus { outline: 2px solid rgba(0,0,0,.25); outline-offset: 1px; }

        Fetching Aggregatron Records index...    </style>

    </div>  </head>

    <div class="container" id="content"></div>  <body>

    <div id="threejs-background"></div>

    <script>

        // Fetch and display the index.txt content    <div id="menu-overlay">

        fetch('./index.txt')      <div class="win98-window" role="dialog" aria-label="Main menu">

            .then(response => response.text())        <div class="win98-titlebar">

            .then(text => {          <div class="win98-title">

                document.getElementById('content').textContent = text;            <span class="win98-icon" aria-hidden="true"></span>

                document.querySelector('.redirect-info').style.display = 'none';            ⍲⅁⅁☈ℇ⅁⍲⍑☈⌾☊ ☈ℇ⍧⌾☈⟄⎎

            })          </div>

            .catch(error => {          <div class="win98-controls" aria-hidden="true">

                document.getElementById('content').innerHTML = `<span style="color: #ff0000;">Error loading content: ${error.message}</span>            <span class="ctl ctl-min"></span>

            <span class="ctl ctl-max"></span>

<span style="color: #ffff00;">Try accessing directly:</span>            <span class="ctl ctl-close disabled"></span>

<a href="./index.txt" style="color: #00ffff;">https://aggregatron-terminal.netlify.app/index.txt</a>          </div>

        </div>

<span style="color: #ffff00;">Or use the terminal:</span>

<a href="./terminal.html" style="color: #00ffff;">https://aggregatron-terminal.netlify.app/terminal.html</a>`;        <div class="win98-body">

                document.querySelector('.redirect-info').style.display = 'none';          <div class="win98-group">

            });            <a class="win98-btn" href="https://www.youtube.com/@aggregatron" target="_blank" rel="noopener noreferrer">Video</a>

    </script>

</body>            <a class="win98-btn"

</html>               href="#"
               id="jrj-trigger"
               data-popup="jrj">
              JRJ Enterprises 
            </a>

            <a class="win98-btn"
               href="#"
               id="lucre-trigger"
               data-popup="lucre">
              Lucre-Naut 
            </a>

            <a class="win98-btn"
               href="#"
               id="aggregasoft-trigger"
               data-popup="aggregasoft">
              Aggrega-Soft™ Musical Solutions
            </a>

            <a class="win98-btn"
               href="./terminal.html"
               target="_blank"
               rel="noopener noreferrer">
              Terminal
            </a>
          </div>

          <div class="win98-status" id="tip" aria-live="polite">
            <span class="tip-label">Tip:</span>
            <span class="tip-text">Aggregatron Records = JRJ Enterprises = Lucre-Naut</span>
          </div>
        </div>
      </div>
    </div>

    <div id="aggregasoft-popup" class="win98-window popup98 hidden" role="dialog" aria-modal="false" aria-labelledby="as-title">
      <div class="win98-titlebar">
        <div class="win98-title" id="as-title">
          <span class="win98-icon" aria-hidden="true"></span>
          Aggrega-Soft™ Launcher
        </div>
        <div class="win98-controls" aria-hidden="true">
          <span id="aggregasoft-close"
                class="ctl ctl-close"
                role="button"
                aria-label="Close"
                tabindex="0"></span>
        </div>
      </div>

      <div class="win98-body">
        <p class="win98-group" style="margin-top:0">
          Click to launch modules.
        </p>
        <div class="win98-group">
          <a class="win98-btn"
             href="https://bright-capybara-8e9e2c.netlify.app/"
             target="_blank"
             rel="noopener noreferrer">
            Piecework Splitter
          </a>
        </div>
        <div class="win98-group">
          <a class="win98-btn"
             href="https://aggregatron.netlify.app/"
             target="_blank"
             rel="noopener noreferrer">
            Aggregatrex5000
          </a>
        </div>
        <div class="win98-status">
          <span class="tip-label">Hint:</span>
          <span class="tip-text">Press Esc or the X to collapse this window.</span>
        </div>
      </div>
    </div>

    <div id="jrj-popup" class="win98-window popup98 hidden" role="dialog" aria-modal="false" aria-labelledby="jrj-title">
      <div class="win98-titlebar">
        <div class="win98-title" id="jrj-title">
          <span class="win98-icon" aria-hidden="true"></span>
          JRJ Enterprises Music
        </div>
        <div class="win98-controls" aria-hidden="true">
          <span id="jrj-close"
                class="ctl ctl-close"
                role="button"
                aria-label="Close"
                tabindex="0"></span>
        </div>
      </div>

      <div class="win98-body">
        <p class="win98-group" style="margin-top:0">
          Experimental electronics and ambient music.
        </p>
        <div class="win98-group">
          <a class="win98-btn"
             href="https://open.spotify.com/artist/2pHmIqZZ8f7UPt9UDgkinC"
             target="_blank"
             rel="noopener noreferrer">
            JRJ Enterprises Spotify
          </a>
        </div>
        <div class="win98-group">
          <a class="win98-btn"
             href="https://jrjenterprises.bandcamp.com/"
             target="_blank"
             rel="noopener noreferrer">
            JRJ Enterprises Bandcamp
          </a>
        </div>
        <div class="win98-status">
          <span class="tip-label">Hint:</span>
          <span class="tip-text">Follow on Bandcamp for lossless & extras!</span>
        </div>
      </div>
    </div>

    <div id="lucre-popup" class="win98-window popup98 hidden" role="dialog" aria-modal="false" aria-labelledby="lucre-title">
      <div class="win98-titlebar">
        <div class="win98-title" id="lucre-title">
          <span class="win98-icon" aria-hidden="true"></span>
          Lucre-Naut Music
        </div>
        <div class="win98-controls" aria-hidden="true">
          <span id="lucre-close"
                class="ctl ctl-close"
                role="button"
                aria-label="Close"
                tabindex="0"></span>
        </div>
      </div>

      <div class="win98-body">
        <p class="win98-group" style="margin-top:0">
          Breaks, IDM, and left-field club music.
        </p>
        <div class="win98-group">
          <a class="win98-btn"
             href="https://open.spotify.com/artist/1xljb8IWF5AZRfoUEsBFEL"
             target="_blank"
             rel="noopener noreferrer">
            Lucre-Naut Spotify
          </a>
        </div>
        <div class="win98-group">
          <a class="win98-btn"
             href="https://lucre-naut.bandcamp.com/"
             target="_blank"
             rel="noopener noreferrer">
            Lucre-Naut Bandcamp
          </a>
        </div>
        <div class="win98-status">
          <span class="tip-label">Hint:</span>
          <span class="tip-text">Add to playlists to boost discovery!</span>
        </div>
      </div>
    </div>



    <script>
      document.querySelectorAll('a.win98-btn').forEach((a) => {
        a.addEventListener('click', (e) => {
          if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || e.button === 1) return;

          if (a.dataset.popup === 'aggregasoft' || a.dataset.popup === 'jrj' || a.dataset.popup === 'lucre') return;

          e.stopPropagation();
          e.preventDefault();
          window.open(a.href, '_blank', 'noopener'); /* <-- fixed (removed stray slash) */
        }, { capture: true });
      });

      document.querySelector('.win98-window').addEventListener('click', (e) => {
        if (e.target.closest('a.win98-btn')) return;

        const btn = e.target.closest('button.win98-btn');
        if (!btn) return;
        console.log('Menu action:', btn.dataset.action);
      });

      (function () {
        const tipRoot = document.getElementById('tip');
        if (!tipRoot) return;

        const tipTextEl = tipRoot.querySelector('.tip-text');
        const defaultTip = tipTextEl.textContent.trim();

        const extraTips = [
          "New videos on YouTube → @aggregatron",
          "JRJ Enterprises ≈ experimental electronics + ambient",
          "Lucre-Naut = breaks, IDM, and left-field club",
          "Follow on Bandcamp for lossless & extras",
          "Spotify: add to playlists to boost discovery",
          "Live visuals powered by Three.js + WebAudio",
        ];

        let pool = extraTips.slice();

        function rnd(max) {
          if (window.crypto?.getRandomValues) {
            const u32 = new Uint32Array(1);
            window.crypto.getRandomValues(u32);
            return u32[0] % max;
          }
          return Math.floor(Math.random() * max);
        }

        function schedule(ms) {
          clearTimeout(schedule.tid);
          schedule.tid = setTimeout(nextTip, ms);
        }

        function nextTip() {
          if (pool.length === 0) pool = extraTips.slice();
          const idx = rnd(pool.length);
          const next = pool.splice(idx, 1)[0];

          tipTextEl.style.opacity = "0";
          setTimeout(() => {
            tipTextEl.textContent = next;
            tipTextEl.style.opacity = "1";
          }, 120);

          schedule(6000 + rnd(6000));
        }

        tipTextEl.textContent = defaultTip;
        schedule(5000);
      })();

      (function () {
        const trigger = document.getElementById('aggregasoft-trigger');
        const popup   = document.getElementById('aggregasoft-popup');
        const closeEl = document.getElementById('aggregasoft-close');

        if (!trigger || !popup || !closeEl) return;

        function openPopup() {
          popup.classList.remove('hidden');
          popup.style.zIndex = 10000;
          closeEl.focus();
        }

        function closePopup() {
          popup.classList.add('hidden');
          trigger.focus();
        }

        trigger.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          openPopup();
        });

        closeEl.addEventListener('click', (e) => {
          e.preventDefault();
          closePopup();
        });

        closeEl.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            closePopup();
          }
        });

        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && !popup.classList.contains('hidden')) {
            closePopup();
          }
        });
      })();

      // JRJ Enterprises popup handler
      (function () {
        const trigger = document.getElementById('jrj-trigger');
        const popup   = document.getElementById('jrj-popup');
        const closeEl = document.getElementById('jrj-close');

        if (!trigger || !popup || !closeEl) return;

        function openPopup() {
          popup.classList.remove('hidden');
          popup.style.zIndex = 10000;
          closeEl.focus();
        }

        function closePopup() {
          popup.classList.add('hidden');
          trigger.focus();
        }

        trigger.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          openPopup();
        });

        closeEl.addEventListener('click', (e) => {
          e.preventDefault();
          closePopup();
        });

        closeEl.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            closePopup();
          }
        });

        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && !popup.classList.contains('hidden')) {
            closePopup();
          }
        });
      })();

      // Lucre-Naut popup handler
      (function () {
        const trigger = document.getElementById('lucre-trigger');
        const popup   = document.getElementById('lucre-popup');
        const closeEl = document.getElementById('lucre-close');

        if (!trigger || !popup || !closeEl) return;

        function openPopup() {
          popup.classList.remove('hidden');
          popup.style.zIndex = 10000;
          closeEl.focus();
        }

        function closePopup() {
          popup.classList.add('hidden');
          trigger.focus();
        }

        trigger.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          openPopup();
        });

        closeEl.addEventListener('click', (e) => {
          e.preventDefault();
          closePopup();
        });

        closeEl.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            closePopup();
          }
        });

        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && !popup.classList.contains('hidden')) {
            closePopup();
          }
        });
      })();


    </script>
  </body>
</html>
